{"version":3,"sources":["utils/config.js","utils/logger.js","services/login.js","services/users.js","reducers/notification.js","reducers/session.js","services/listings.js","reducers/search.js","assets/loading2.gif","components/util/loadingWrapper.js","components/listing/deleteListingButton.js","components/listing/singleListing.js","components/listing/listingView.js","components/geo/listingMarker.js","components/geo/map.js","presenters/searchResultPresenter.js","components/users/singleUser.js","components/geo/singleLocation.js","assets/image-placeholder.jpg","components/listing/singleProduct.js","components/listing/detailedListing.js","presenters/listingPresenter.js","components/util/errorMessage.js","components/session/signUpForm.js","utils/validation/validation.js","utils/validation/signup.js","services/signup.js","presenters/signupPresenter.js","components/listing/createListing.js","utils/validation/createlisting.js","presenters/createListingPresenter.js","components/users/userProfile.js","presenters/userPresenter.js","components/session/profileButton.js","components/listing/createListingButton.js","components/session/logOutButton.js","components/session/logInButton.js","components/header/topBar.js","components/search/searchForm.js","presenters/searchFormPresenter.js","presenters/topBarPresenter.js","components/util/errorPage.js","components/notification/closeButton.js","components/notification/notification.js","presenters/notificationPresenter.js","components/session/logInForm.js","utils/validation/login.js","presenters/logInPresenter.js","App.js","store.js","index.js"],"names":["API_URL","process","S3_URL","logger","info","error","extension","baseUrl","loginService","auth","user","a","axios","post","res","data","userService","getAll","get","create","newUser","getById","id","remove","delete","update","put","message","duration","dispatch","type","timeout","setTimeout","notificationReducer","state","action","clearTimeout","logInUser","username","password","window","localStorage","setItem","token","sessionReducer","listingService","newListing","headers","Authorization","search","query","nearbyLocation","nearbyCoords","longitude","latitude","initialState","loading","results","performSearch","searchReducer","LoadingWrapper","children","className","alt","src","loadingGif","DeleteListingButton","deleteListing","onClick","limitLength","text","length","substring","maxLimit","concat","SingleListing","listing","onHover","onDeleteListing","onMouseEnter","imageUrl","height","width","title","price","desc","location","e","ListingView","listings","map","ListingMarker","coords","Marker","position","eventHandlers","click","Tooltip","interactive","opacity","Map","center","recommended","highlighted","onMarkerClick","c","useEffect","markers","document","getElementsByClassName","found","i","getIndex","dispatchEvent","MouseEvent","view","bubbles","cancelable","getElementById","ChangeCenter","useMap","setView","getZoom","getMarkers","MapContainer","style","zoom","scrollWheelZoom","TileLayer","attribution","url","SearchResultPresenter","useSelector","useState","setHighlighted","nav","useNavigate","SingleUser","colSpan","name","email","phone","address","SingleLocation","geoData","country","continent","SingleProduct","product","Object","keys","href","sourceURLs","target","rel","imageURLs","placeholder","prices","amountMax","toString","DetailedListing","onCancel","onRecommended","onUser","onLocation","recs","ListingPresenter","setLoading","setListing","useParams","useDispatch","getListing","ErrorMessage","SignUpForm","errorMessage","onSignUp","signUp","preventDefault","required","isNumber","input","test","isEmailValid","isPasswordValid","isUsernameValid","signUpValidation","signupService","signup","new_user","SignUpPresenter","setErrorMessage","form","value","validationError","msg","signUpService","response","ListingCreationForm","createListing","uploadMessage","setUploadMessage","method","encType","onChange","files","hidden","htmlFor","rows","cols","onSubmit","isImagevalid","imageName","isLocationValid","createListingValidation","image","CreateListingPresenter","session","formdata","FormData","append","UserProfile","onListingClick","UserPresenter","setUser","stopPropagation","confirm","getUser","ProfileButton","onProfile","CreateListingButton","onCreateListing","LogOutButton","onLogout","LogInButton","onLogin","TopBar","onLogo","SearchForm","onSearch","onType","event","SearchFormPresenter","searchType","setSearchType","callBlocker","setBlocker","TopBarPresenter","removeItem","ErrorPage","cancel","CloseButton","Notification","notification","onClose","NotificationPresenter","close","LogInForm","logIn","loginValidation","LogInPresenter","App","getItem","exact","path","element","to","reducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render"],"mappings":"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","file":"static/js/main.70ec9ecb.chunk.js","sourcesContent":["/* Used to import environment variables */\r\n\r\nlet API_URL = process.env.REACT_APP_API_URL\r\nlet S3_URL = process.env.REACT_APP_S3_URL\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n    API_URL = '/'\r\n}\r\n\r\nexport {\r\n    API_URL,\r\n    S3_URL\r\n}","/* Used as a central module for logging */\r\nconst logger = {\r\n    info: (...params) => {\r\n        if (process.env.NODE_ENV !== 'test' && process.env.NODE_ENV !== 'production' && process.env.NODE_ENV) {\r\n            console.log(...params)\r\n        }\r\n    },\r\n\r\n    error: (...params) => {\r\n        if (process.env.NODE_ENV !== 'test' && process.env.NODE_ENV !== 'production' && process.env.NODE_ENV) {\r\n            console.error(...params)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default logger","import axios from 'axios'\r\n\r\nimport {API_URL} from '../utils/config'\r\nimport logger from '../utils/logger'\r\n\r\nconst extension = 'api/login/'\r\nconst baseUrl = API_URL + extension\r\n\r\nconst loginService = {\r\n    /* Example user object:\r\n        {\r\n         password: \"password1234\",\r\n         username: \"user1234\"\r\n         }\r\n    */\r\n    auth: async (user) => {\r\n        try {\r\n            logger.info(extension, 'Authenticating user:', user)\r\n\r\n            const res = await axios.post(baseUrl, user)\r\n\r\n            logger.info(extension, 'User authenticated', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n}\r\n\r\nexport default loginService","import axios from 'axios'\r\n\r\nimport {API_URL} from '../utils/config'\r\nimport logger from '../utils/logger'\r\n\r\nconst extension = 'api/users/'\r\nconst baseUrl = API_URL + extension\r\n\r\nconst userService = {\r\n    getAll: async () => {\r\n        try {\r\n            logger.info(extension, 'Fetching users')\r\n\r\n            const res = await axios.get(baseUrl)\r\n\r\n            logger.info(extension, 'Users fetched', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n\r\n    /* Example newUser object:\r\n    {\r\n         password: \"password1234\",\r\n         username: \"user1234\",\r\n         name: \"name1234\",\r\n         email: \"email1234\",\r\n         phone: \"email1234\",\r\n         address: \"email1234\"\r\n\r\n     }\r\n     */\r\n    create: async (newUser) => {\r\n        try {\r\n            logger.info(extension, 'Creating user', newUser)\r\n\r\n            const res = await axios.post(baseUrl, newUser)\r\n\r\n            logger.info(extension, 'User created', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    getById: async (id) => {\r\n        try {\r\n            logger.info(extension, 'Fetching user', id)\r\n\r\n            const res = await axios.get(baseUrl + id)\r\n\r\n            logger.info(extension, 'User fetched', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    remove: async (id) => {\r\n        try {\r\n            logger.info(extension, 'Deleting user', id)\r\n\r\n            const res = await axios.delete(baseUrl + id)\r\n\r\n            logger.info(extension, 'User deleted', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    update: async (id, newUser) => {\r\n        try {\r\n            logger.info(extension, 'Updating user', id, newUser)\r\n\r\n            const res = await axios.put(`${baseUrl}${id}`, newUser)\r\n\r\n            logger.info(extension, 'User updated', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    }\r\n}\r\n\r\nexport default userService","const notificationReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n    case 'DISPLAY_INFO': {\r\n        return {\r\n            type: 'info',\r\n            message: action.data.message,\r\n            timeout: action.data.timeout\r\n        }\r\n    }\r\n    case 'DISPLAY_ERROR': {\r\n        return {\r\n            type: 'error',\r\n            message: action.data.message,\r\n            timeout: action.data.timeout\r\n        }\r\n    }\r\n    case 'RESET_NOTIFICATION': {\r\n        if (state) {\r\n            clearTimeout(state.timeout)\r\n        }\r\n        return null\r\n    }\r\n    default: return state\r\n    }\r\n}\r\n\r\nexport const info = (message, duration) => {\r\n    return async dispatch => {\r\n        dispatch({\r\n            type: 'RESET_NOTIFICATION',\r\n        })\r\n\r\n        const timeout = setTimeout(() => {\r\n            dispatch({\r\n                type: 'RESET_NOTIFICATION',\r\n            })\r\n        }, duration*1000)\r\n\r\n        dispatch({\r\n            type: 'DISPLAY_INFO',\r\n            data: {message, timeout}\r\n        })\r\n    }\r\n}\r\n\r\nexport const error = (message, duration) => {\r\n    return async dispatch => {\r\n        dispatch({\r\n            type: 'RESET_NOTIFICATION',\r\n        })\r\n\r\n        const timeout = setTimeout(() => {\r\n            dispatch({\r\n                type: 'RESET_NOTIFICATION',\r\n            })\r\n        }, duration*1000)\r\n\r\n        dispatch({\r\n            type: 'DISPLAY_ERROR',\r\n            data: {message, timeout}\r\n        })\r\n    }\r\n}\r\n\r\nexport const clear = () => {\r\n    return {\r\n        type: 'RESET_NOTIFICATION',\r\n    }\r\n}\r\n\r\nexport default notificationReducer","import loginService from '../services/login'\r\nimport userService from '../services/users'\r\nimport logger from '../utils/logger'\r\n\r\nimport {info} from './notification'\r\n\r\n/* Reducer handling login session, state will contain user object and web token during session */\r\nconst sessionReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n    case 'INIT_SESSION': {\r\n        return action.data\r\n    }\r\n    case 'END_SESSION': {\r\n        return null\r\n    }\r\n    default: return state\r\n    }\r\n}\r\n\r\n/* Attempts to log user in with the given credentials */\r\nexport const logInUser = (username, password) => {\r\n    return async dispatch => {\r\n        const user = {username, password}\r\n\r\n        try {\r\n            const res = await loginService.auth(user)\r\n\r\n            window.localStorage.setItem('id', res.user.id)\r\n            window.localStorage.setItem('token', res.token)\r\n\r\n            dispatch({\r\n                type: 'INIT_SESSION',\r\n                data: res\r\n            })\r\n\r\n            dispatch(info(\"Successfully logged in!\", 5))\r\n        } catch (err) {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\n/* Checks localstorage if previous sessions exists and continues that session */\r\nexport const initSession = () => {\r\n    return async dispatch => {\r\n        const id = window.localStorage.getItem('id')\r\n        const token = window.localStorage.getItem('token')\r\n\r\n        if (id && token) {\r\n            try {\r\n                const user = await userService.getById(id)\r\n\r\n                dispatch({\r\n                    type: 'INIT_SESSION',\r\n                    data: {\r\n                        user,\r\n                        token\r\n                    }\r\n                })\r\n\r\n                logger.info('Successfully continued previous session')\r\n            } catch (err) {\r\n                logger.error('Failed to continue session from localstorage:', err)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/* Logs user out and removes session from localstorage */\r\nexport const endSession = () => {\r\n    return async dispatch => {\r\n        window.localStorage.removeItem('id')\r\n        window.localStorage.removeItem('token')\r\n\r\n        dispatch(info(\"Successfully logged out!\", 5))\r\n        dispatch({\r\n            type: 'END_SESSION'\r\n        })\r\n    }\r\n}\r\n\r\nexport default sessionReducer","import axios from 'axios'\r\n\r\nimport {API_URL} from '../utils/config'\r\nimport logger from '../utils/logger'\r\n\r\nconst extension = 'api/listings/'\r\nconst baseUrl = API_URL + extension\r\n\r\nconst listingService = {\r\n    getAll: async () => {\r\n        try {\r\n            logger.info(extension, 'Fetching listings')\r\n\r\n            const res = await axios.get(baseUrl)\r\n\r\n            logger.info(extension, 'Listings fetched', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n\r\n    /* Example newListing object:\r\n        {\r\n             title: \"title1234\",\r\n             description: \"desc134\",\r\n             price: \"1234\",\r\n             location: \"Bromma\",\r\n             imageUrl: \"pathtoimage\"\r\n         }\r\n\r\n         a token is attained by logging in\r\n     */\r\n    create: async (newListing, token) => {\r\n        try {\r\n            logger.info(extension, 'Creating listing', newListing)\r\n\r\n            const res = await axios.post(baseUrl, newListing, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + token,\r\n                    'content-type': 'multipart/form-data'\r\n                }\r\n            })\r\n\r\n            logger.info(extension, 'DetailedListing created', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    getById: async (id) => {\r\n        try {\r\n            logger.info(extension, 'Fetching listing', id)\r\n\r\n            const res = await axios.get(baseUrl + id)\r\n\r\n            logger.info(extension, 'DetailedListing fetched', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    remove: async (id, token) => {\r\n        try {\r\n            logger.info(extension, 'Deleting listing', id)\r\n\r\n            const res = await axios.delete(baseUrl + id, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + token\r\n                }\r\n            })\r\n\r\n            logger.info(extension, 'DetailedListing deleted', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    search: async (query) => {\r\n        try {\r\n            logger.info(extension, 'Fetching listings')\r\n\r\n            const res = await axios.get(API_URL + 'api/search/' + query)\r\n\r\n            logger.info(extension, 'Listings fetched', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    nearbyLocation: async (query) => {\r\n        try {\r\n            logger.info(extension, 'Fetching listings')\r\n\r\n            const res = await axios.get(API_URL + 'api/location/' + query)\r\n\r\n            logger.info(extension, 'Listings fetched', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    nearbyCoords: async (longitude, latitude) => {\r\n        try {\r\n            logger.info(extension, 'Fetching listings')\r\n\r\n            const res = await axios.get(API_URL + 'api/location/' + latitude + \"/\" + longitude)\r\n\r\n            logger.info(extension, 'Listings fetched', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n    update: async (id, newListing, token) => {\r\n        try {\r\n            logger.info(extension, 'Updating listing', id, newListing)\r\n\r\n            const res = await axios.put(`${baseUrl}${id}`, newListing, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + token\r\n                }\r\n            })\r\n\r\n            logger.info(extension, 'DetailedListing updated', res)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    }\r\n}\r\n\r\nexport default listingService","import listingService from '../services/listings'\r\nimport logger from '../utils/logger'\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    results: [],\r\n}\r\n\r\n/* Reducer handling search results */\r\nconst searchReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n    case 'SET_SEARCH_RESULTS': {\r\n        return {\r\n            loading: false,\r\n            results: action.data\r\n        }\r\n    }\r\n    case 'SET_SEARCH_LOADING': {\r\n        return {\r\n            ...state,\r\n            loading: true,\r\n        }\r\n    }\r\n    default: return state\r\n    }\r\n}\r\n//TODO: limit api calls more?\r\nexport const performSearch = (type, query) => {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({\r\n                type: 'SET_SEARCH_LOADING',\r\n            })\r\n\r\n            let res\r\n\r\n            if (type == 0) {\r\n                if (query) {\r\n                    res = await listingService.search(query)\r\n                } else {\r\n                    res = await listingService.getAll()\r\n                }\r\n            } else if (type == 1) {\r\n                res = await listingService.nearbyLocation(query)\r\n            } else if (type == 2) {\r\n                res = await listingService.nearbyCoords(query.longitude, query.latitude)\r\n            } else {\r\n                res = []\r\n            }\r\n\r\n\r\n\r\n            dispatch({\r\n                type: 'SET_SEARCH_RESULTS',\r\n                data: res\r\n            })\r\n        } catch (err) {\r\n            dispatch({\r\n                type: 'SET_SEARCH_RESULTS',\r\n                data: []\r\n            })\r\n\r\n            logger.error('Search failed', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport default searchReducer","export default __webpack_public_path__ + \"static/media/loading2.add16cbb.gif\";","import React from 'react'\r\n\r\nimport loadingGif from '../../assets/loading2.gif'\r\n\r\nconst LoadingWrapper = ({children, loading, data}) => {\r\n    return (\r\n        <>\r\n            {\r\n                (loading) ?\r\n                <div className=\"loading-image-wrapper\">\r\n                    <img className=\"loading-image\" alt=\"\" src={loadingGif}/>\r\n                </div> : (data) ? children : null\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LoadingWrapper","import React from \"react\"\r\n\r\nfunction DeleteListingButton({deleteListing}) {\r\n    return (\r\n        <button className=\"btn btn-danger\" id=\"delete-listing-button\" onClick={deleteListing}>\r\n            Delete\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default DeleteListingButton","import React from \"react\";\r\nimport {S3_URL} from '../../utils/config'\r\nimport DeleteListingButton from \"./deleteListingButton\";\r\n\r\nexport function SingleListing({listing, onClick, onHover, onDeleteListing}) {\r\n    if (!listing) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <tr onClick={() => onClick(listing)} className=\"single-listing\" onMouseEnter={() => (onHover) ? onHover(listing) : null}>\r\n            <td>\r\n                <img alt=\"thumbnail\" src={S3_URL + listing.imageUrl} height={100} width={100} />\r\n            </td>\r\n            <td><div>{limitLength(listing.title)}</div></td>\r\n            <td><div>{listing.price}</div></td>\r\n            <td className=\"listing-desc\"><div><p>{limitLength(listing.desc)}</p></div></td>\r\n            <td className=\"listing-desc\"><div>{listing.location}</div></td>\r\n            <td>\r\n                {(onDeleteListing) ? <DeleteListingButton deleteListing={(e) => onDeleteListing(e, listing)}/> : null}\r\n            </td>\r\n        </tr>\r\n    );\r\n}\r\n\r\n/**\r\n * Limits the length of a string\r\n * @param {any} text\r\n */\r\nfunction limitLength(text) {\r\n    const maxLimit = 500;\r\n    if (text.length <= maxLimit) {\r\n        return text;\r\n    }\r\n    return text.substring(0, maxLimit - 3).concat(\"...\");\r\n}\r\n\r\nexport default SingleListing","import React from \"react\";\r\nimport SingleListing from \"./singleListing\";\r\n\r\n/* Component that displays a view of the given listings */\r\nfunction ListingView({listings, onClick, onHover, onDeleteListing}) {\r\n    if (!listings || listings.length === 0) {\r\n        return (\r\n            <div className=\"no-result-wrapper\">\r\n                No results!\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <table className=\"table table-striped\">\r\n            <tbody>\r\n            <tr>\r\n                <td/>\r\n                <td><b>Title</b></td>\r\n                <td><b>Price</b></td>\r\n                <td className=\"listing-desc\"><b>Description</b></td>\r\n                <td className=\"listing-desc\"><b>Location</b></td>\r\n                <td/>\r\n            </tr>\r\n            {listings.map(listing =>\r\n                    <SingleListing\r\n                        key={listing.id}\r\n                        listing={listing}\r\n                        onClick={onClick}\r\n                        onHover={onHover}\r\n                        onDeleteListing={onDeleteListing}\r\n                    />\r\n            )}\r\n            </tbody>\r\n        </table>\r\n    );\r\n}\r\n\r\nexport default ListingView","import React from 'react'\r\nimport {Marker, Tooltip} from 'react-leaflet'\r\nimport { S3_URL } from \"../../utils/config\";\r\n\r\nfunction ListingMarker({ listing, onClick }) {\r\n    if (!listing) {\r\n        return null\r\n    }\r\n\r\n    if (!listing.coords) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={\"marker-wrapper\" + listing.id}>\r\n            <Marker position={[listing.coords.latitude, listing.coords.longitude]}\r\n                eventHandlers={{ click: () => { if (onClick) onClick(listing) } }}\r\n            >\r\n                <Tooltip\r\n                    className=\"map-marker\"\r\n                    eventHandlers={{ click: () => { if (onClick) onClick(listing) } }}\r\n                    interactive={true}\r\n                    opacity={100}\r\n                >\r\n                    <img id=\"img-set\" alt=\"No img\" src={S3_URL + listing.imageUrl} height={50} width={50} />\r\n                    <div>\r\n                        <b>\r\n                            {listing.title}\r\n                        </b>\r\n                        <br />\r\n                        {listing.location}\r\n                        <br />\r\n                        {listing.price} SEK\r\n                    </div>\r\n                </Tooltip>\r\n            </Marker>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ListingMarker","import React, {useEffect} from \"react\";\r\nimport { MapContainer, TileLayer, useMap } from 'react-leaflet'\r\nimport ListingMarker from \"../geo/listingMarker\"\r\n\r\nfunction Map({center, listings, recommended, highlighted, height, onMarkerClick}) {\r\n    const c = (center) ? [center.latitude, center.longitude] : [59.32462279908758, 18.071380368487894]\r\n\r\n    useEffect(() => {\r\n        const getIndex = (highlighted) => {\r\n            for (let i = 0; i < listings.length; i++) {\r\n                if (highlighted.id === listings[i].id) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (highlighted) {\r\n            const markers = document.getElementsByClassName('leaflet-marker-icon')\r\n\r\n            if (markers) {\r\n                const found = markers[getIndex(highlighted)];\r\n\r\n                if (found) {\r\n                    found.dispatchEvent(new MouseEvent('mouseover', {\r\n                        view: window,\r\n                        bubbles: true,\r\n                        cancelable: true\r\n                    }))\r\n                }\r\n            }\r\n        }\r\n\r\n        return () => {\r\n            const map = document.getElementById('leaflet-map')\r\n\r\n            if (map) {\r\n                map.click();\r\n            }\r\n        }\r\n    }, [highlighted, listings])\r\n\r\n    const ChangeCenter = ({coords}) => {\r\n        const map = useMap();\r\n        map.setView(coords, map.getZoom());\r\n\r\n        return null;\r\n    }\r\n\r\n    const getMarkers = (listings) => {\r\n        if (!listings) {\r\n            return\r\n        }\r\n\r\n        if (!listings[0]) {\r\n            return <ListingMarker\r\n                listing={listings}\r\n                onClick={onMarkerClick}\r\n            />\r\n        }\r\n\r\n        return listings.map(listing => {\r\n            return <ListingMarker\r\n                key={listing.id}\r\n                listing={listing}\r\n                onClick={onMarkerClick}\r\n            />\r\n        })\r\n    }\r\n\r\n    return (\r\n        <MapContainer className=\"map\"\r\n                      id=\"leaflet-map\"\r\n                      style={{ height: height }}\r\n                      center={c}\r\n                      zoom={10}\r\n                      scrollWheelZoom={false}\r\n        >\r\n            <TileLayer\r\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n            <ChangeCenter coords={c}/>\r\n            {getMarkers(listings)}\r\n            {getMarkers(recommended)}\r\n        </MapContainer>\r\n    );\r\n}\r\n\r\n\r\nexport default Map","import React, {useEffect, useState} from \"react\"\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nimport LoadingWrapper from \"../components/util/loadingWrapper\";\r\nimport ListingView from \"../components/listing/listingView\";\r\nimport Map from \"../components/geo/map\";\r\n\r\nfunction SearchResultPresenter() {\r\n    const {results, loading} = useSelector(state => state.search)\r\n    const [highlighted, setHighlighted] = useState(null)\r\n    const nav = useNavigate();\r\n\r\n    const onClick = (listing) => {\r\n        nav('/listing/' + listing.id);\r\n    }\r\n\r\n    const onHover = (listing) => {\r\n        setHighlighted(listing)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setHighlighted((results[0]) ? results[0] : null)\r\n    }, [results])\r\n\r\n    return (\r\n        <div className=\"search-result-wrapper\">\r\n            <div className=\"search-map-wrapper\">\r\n                <Map listings={results}\r\n                     center={(highlighted) ? highlighted.coords: null}\r\n                     highlighted = {highlighted}\r\n                     height={250}\r\n                     onMarkerClick={onClick}\r\n                />\r\n            </div>\r\n            <div className=\"search-listing-wrapper\">\r\n                <LoadingWrapper loading={loading} data={results}>\r\n                    <ListingView listings={results} onClick={onClick} onHover={onHover}/>\r\n                </LoadingWrapper>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default SearchResultPresenter","import React from \"react\";\r\n\r\nexport function SingleUser({user, onClick}) {\r\n    if (!user) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className={(onClick) ? \"single-user user-clickable\" : \"single-user\"} onClick={(onClick) ? () => onClick(user) : null}>\r\n            <table className={(onClick) ? \"single-user-table table table-striped user-table-clickable\" : \"single-user-table table table-striped\"}>\r\n                <tbody>\r\n                    <tr className=\"user-table-header\">\r\n                        <th colSpan={2}>\r\n                            {user.username}\r\n                        </th>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Name:</td>\r\n                        <td>{user.name} </td>\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>Email:</td>\r\n                        <td>{user.email} </td>\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>Phone Number:</td>\r\n                        <td>{user.phone} </td>\r\n                    </tr>\r\n\r\n                    <tr>\r\n                        <td>Address:</td>\r\n                        <td>{user.address}</td>\r\n                    </tr>\r\n\r\n                </tbody>\r\n\r\n            </table>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SingleUser","import React from \"react\";\r\n\r\nexport function SingleLocation({listing, onClick}) {\r\n    if (!listing) {\r\n        return null\r\n    }\r\n\r\n    if (!listing.coords) {\r\n        return null\r\n    }\r\n\r\n    if (!listing.coords.geoData) {\r\n        return (\r\n            <div className={(onClick) ? \"single-location\" : \"single-location\"}>\r\n                <b>{listing.location}</b>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const geoData = listing.coords.geoData\r\n\r\n    return (\r\n        <div className={(onClick) ? \"single-location location-clickable\" : \"single-location\"} onClick={(onClick) ? () => onClick(geoData) : null}>\r\n            <b>{geoData.name}</b>\r\n            <br/>\r\n            Country: {geoData.country}\r\n            <br/>\r\n            Continent: {geoData.continent}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SingleLocation","export default __webpack_public_path__ + \"static/media/image-placeholder.48926a32.jpg\";","import React from \"react\";\r\nimport placeholder from '../../assets/image-placeholder.jpg'\r\n\r\nfunction SingleProduct({listing}) {\r\n    if (!listing) {\r\n        return null\r\n    }\r\n\r\n    if (!listing.product || Object.keys(listing.product).length === 0) {\r\n        return (\r\n            <div className=\"single-product\">\r\n                <b>No products found</b>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const product = listing.product\r\n\r\n    return (\r\n        <a href={product.sourceURLs[0]} target=\"_blank\" rel=\"noreferrer\">\r\n            <div className=\"single-product product-clickable\">\r\n                    <div className=\"single-product-top\">\r\n                        <img className=\"single-product-img\" alt=\"No img\" src={(product.imageURLs) ? product.imageURLs[0] : placeholder} height={50} width={50}/>\r\n                        <div>\r\n                            <b>{product.name.substring(0, 40).concat((product.name.length > 40) ? \"...\" : \"\")}</b>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"single-product-info\">\r\n                        {(product.prices) ? \"Price: \" + (product.prices[0].amountMax*7).toString().substring(0, 10) + \" SEK\": \"No price info\"}\r\n                    </div>\r\n            </div>\r\n        </a>\r\n    );\r\n}\r\n\r\nexport default SingleProduct","import React from 'react'\r\nimport SingleUser from \"../users/singleUser\";\r\nimport '../../styling/listingStyle.css';\r\nimport {S3_URL} from \"../../utils/config\";\r\nimport SingleLocation from \"../geo/singleLocation\";\r\nimport SingleProduct from \"./singleProduct\";\r\nimport ListingView from \"./listingView\";\r\n\r\nconst DetailedListing = ({listing, onCancel, onRecommended, onUser, onLocation}) => {\r\n    if (!listing) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"detailed-listing\">\r\n                <div>\r\n                    <button className=\"btn btn-danger\" onClick={onCancel}>\r\n                        Cancel\r\n                    </button>\r\n                </div>\r\n                <div id=\"detail-top-padding\">\r\n                    <div>\r\n                        <h3>{listing.title}</h3>\r\n                    </div>\r\n                    <div className=\"detailed-top\">\r\n                        <div className=\"detailed-top-left\">\r\n                            General information:\r\n                            <div className=\"detailed-listing-info\">\r\n                                <div>\r\n                                 <b>Price: {listing.price} SEK </b>\r\n                                </div>\r\n                                <br/>\r\n                                <b>Description:</b>\r\n                                <p>{listing.desc}</p>\r\n                            </div>\r\n                            Seller:\r\n                            <SingleUser user={listing.user} onClick={onUser}/>\r\n                        </div>\r\n                        <div className=\"detailed-top-right-wrapper\">\r\n                        <div className=\"detailed-top-middle\">\r\n                            <img className=\"detailed-listing-image\" alt=\"No img\" src={S3_URL +  listing.imageUrl} height={400} width={400}/>\r\n                        </div>\r\n                        <div className=\"detailed-top-right\">\r\n                            Location:\r\n                            <SingleLocation listing={listing} onClick={onLocation}/>\r\n                            Similar product:\r\n                            <SingleProduct listing={listing} onClick={onLocation}/>\r\n                        </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"recommendations\">\r\n                    <div>\r\n                        <h3>Recommended listings</h3>\r\n                    </div>\r\n                    <div id=\"rec-listing\">\r\n                        <ListingView listings={listing.recs} onClick={onRecommended}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DetailedListing","import React, {useEffect, useState} from \"react\"\r\nimport LoadingWrapper from \"../components/util/loadingWrapper\";\r\nimport DetailedListing from \"../components/listing/detailedListing\";\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport listingService from '../services/listings'\r\nimport {performSearch} from \"../reducers/search\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nfunction ListingPresenter() {\r\n    const [loading, setLoading] = useState(false)\r\n    const [listing, setListing] = useState({})\r\n    const nav = useNavigate()\r\n    const {id} = useParams()\r\n    const dispatch = useDispatch()\r\n\r\n    const getListing = async (id) => {\r\n        if (!loading) {\r\n            setLoading(true)\r\n\r\n            try{\r\n                const res = await listingService.getById(id)\r\n                setListing(res)\r\n                setLoading(false)\r\n            } catch(err){\r\n                nav('/404')\r\n                setLoading(false)\r\n            }\r\n        }\r\n    }\r\n\r\n    const onCancel = () => {\r\n        nav('/');\r\n    }\r\n\r\n    const onRecommended = (listing) => {\r\n        nav('/listing/' + listing.id);\r\n    }\r\n\r\n    const onUser = (user) => {\r\n        nav('/user/' + user.id);\r\n    }\r\n\r\n    const onLocation = (coords) => {\r\n        dispatch(performSearch(2, coords))\r\n        nav('/');\r\n    }\r\n\r\n    useEffect(() => {\r\n        getListing(id)\r\n    }, [id])\r\n\r\n    return (\r\n        <div className={\"debug\"}>\r\n            <LoadingWrapper loading={loading} data={listing}>\r\n                <DetailedListing listing={listing} onCancel={onCancel} onRecommended={onRecommended} onUser={onUser} onLocation={onLocation}/>\r\n            </LoadingWrapper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ListingPresenter","\r\nconst ErrorMessage = ({message}) => {\r\n    return (\r\n        <div className=\"error-message\" id=\"error-message\">\r\n           <h6>{message}</h6>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ErrorMessage","import React from \"react\"\r\nimport '../../styling/style_signup.css';\r\nimport ErrorMessage from \"../util/errorMessage\";\r\n\r\n\r\nfunction SignUpForm({errorMessage, onSignUp}) {\r\n    const signUp = async (e) => {\r\n        e.preventDefault()\r\n        onSignUp(e)\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\" id=\"signup\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                <h3>User credentials</h3>\r\n                    <div className=\"signUpForm\">\r\n                        <form id=\"signUpForm\">\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"username-input\"\r\n                                    className=\"form-control\"\r\n                                    type=\"text\"\r\n                                    name=\"username\"\r\n                                    placeholder=\"Username\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"password-input\"\r\n                                    className=\"form-control\"\r\n                                    type=\"text\"\r\n                                    name=\"password\"\r\n                                    placeholder=\"Password\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"email-input\"\r\n                                    className=\"form-control\"\r\n                                    type=\"text\"\r\n                                    name=\"email\"\r\n                                    placeholder=\"Email\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"phone number-input\"\r\n                                    className=\"form-control\"\r\n                                    type=\"text\"\r\n                                    name=\"phone\"\r\n                                    placeholder=\"Phone\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"name-input\"\r\n                                    className=\"form-control\"\r\n                                    type=\"text\"\r\n                                    name=\"name\"\r\n                                    placeholder=\"Name\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"address-input\"\r\n                                    className=\"form-control\"\r\n                                    type=\"text\"\r\n                                    name=\"address\"\r\n                                    placeholder=\"Address\"\r\n                                />\r\n                            </div>\r\n                            <button className=\"btn btn-primary form-control\" id=\"login-button\" type=\"submit\" onClick={(e) => {signUp(e);}}>\r\n                                    Submit\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"error-messages\">\r\n                        <ErrorMessage message={errorMessage}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignUpForm","/* Form validation helper functions */\r\n\r\nfunction isNumber(input){\r\n    const re = /^\\d+$/;\r\n    return re.test(input);\r\n}\r\n\r\nconst isLetters = (input) => {\r\n    const re = /^[a-zA-Z ]+$/;\r\n    return re.test(input);\r\n}\r\n\r\nexport {\r\n    isNumber, \r\n    isLetters\r\n}","import {\r\n    isNumber,\r\n    isLetters\r\n} from './validation';\r\n\r\n\r\nfunction signUpValidation({\r\n                    username,\r\n                    password,\r\n                    email,\r\n                    phone,\r\n                    name,\r\n                    address\r\n                }){\r\n\r\n    let errorMessage = null;\r\n\r\n    /*\r\n    const formDOM = document.forms.signUpForm\r\n    const errorDOM = document.getElementById(\"signup-error-message\");\r\n    let username = formDOM.username\r\n    let password = formDOM.password\r\n    let email = formDOM.email\r\n    let phone = formDOM.phone\r\n    let name = formDOM.name\r\n    let address = formDOM.address\r\n    */\r\n\r\n    if(!username){\r\n        errorMessage = \"Username must be specified\"\r\n        return [true, errorMessage];\r\n    } else if (!isUsernameValid(username)){\r\n        errorMessage = \"Username must be altest 4 characters\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if (!password){\r\n        errorMessage = \"Password must be specified\";\r\n        return [true, errorMessage];\r\n    } else if (!isPasswordValid(password)){\r\n        errorMessage = \"Password must be altest 8 characters\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if(!email){\r\n        errorMessage = \"Email must be specified\";\r\n        return [true, errorMessage];\r\n    } else if(!isEmailValid(email)){\r\n        errorMessage = \"Incorrect email format\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if(!phone){\r\n        errorMessage = \"Phone number must be specified\";\r\n        return [true, errorMessage];\r\n    } else if(!isNumber(phone)){\r\n        errorMessage = \"Phone number must be specified only in numbers\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if(!name){\r\n        errorMessage = \"Name must be specified\";\r\n        return [true, errorMessage];\r\n    } else if(!isLetters(name)){\r\n        errorMessage = \"Name can only contain letters\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if(!address){\r\n        errorMessage = \"Address must be specified\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    return [false, errorMessage];\r\n}\r\n\r\nconst isEmailValid = (email) => {\r\n    const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n};\r\n\r\nconst isPasswordValid = (password) => {\r\n    const re = /^.{8,}$/;\r\n    return re.test(password);\r\n}\r\n\r\nconst isUsernameValid = (username) => {\r\n    const re = /^.{4,}$/;\r\n    return re.test(username);\r\n}\r\n\r\nexport default signUpValidation","import axios from 'axios'\r\n\r\nimport {API_URL} from '../utils/config'\r\nimport logger from '../utils/logger'\r\n\r\nconst extension = 'api/users'\r\nconst baseUrl = API_URL + extension\r\n\r\nconst signupService = {\r\n    /* Example sign up object:\r\n        {\r\n            password: \"password1234\",\r\n            username: \"user1234\",\r\n            email: \"mail@abc.se\" ,\r\n            phoneNumber: 123456789,\r\n            name: \"name1234\",\r\n            address: \"address1234\"\r\n        }\r\n    */\r\n    signup: async (new_user) => {\r\n        try {\r\n            logger.info(extension, 'Authenticating user:', new_user)\r\n\r\n            const res = await axios.post(baseUrl, new_user)\r\n\r\n            logger.info(extension, 'User authenticated', new_user)\r\n\r\n            return res.data\r\n        } catch (err) {\r\n            logger.error(extension, err)\r\n            throw err\r\n        }\r\n    },\r\n}\r\n\r\nexport default signupService","import React, {useState} from \"react\"\r\nimport SignUpForm from \"../components/session/signUpForm\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport signUpValidation from \"../utils/validation/signup\";\r\nimport signUpService from \"../services/signup\";\r\nimport {logInUser} from \"../reducers/session\";\r\nimport {error, info} from \"../reducers/notification\";\r\nimport LoadingWrapper from \"../components/util/loadingWrapper\";\r\n\r\nfunction SignUpPresenter() {\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const dispatch = useDispatch()\r\n    const nav = useNavigate();\r\n\r\n    const signUp = async (e) => {\r\n        const new_user = {\r\n            username: e.target.form[0].value,\r\n            password: e.target.form[1].value,\r\n            email: e.target.form[2].value,\r\n            phone: e.target.form[3].value,\r\n            name: e.target.form[4].value,\r\n            address: e.target.form[5].value\r\n        }\r\n\r\n        let [validationError, msg] = signUpValidation(new_user);\r\n\r\n        if(validationError){\r\n            setErrorMessage(msg);\r\n            return false;\r\n        } else {\r\n            setErrorMessage('');\r\n        }\r\n\r\n        if (!loading) {\r\n            try {\r\n                setLoading(true)\r\n\r\n                await signUpService.signup(new_user)\r\n                await dispatch(logInUser(new_user.username, new_user.password))\r\n\r\n                dispatch(info(\"Successfully signed up!\", 5))\r\n\r\n                nav('/')\r\n\r\n                setLoading(false)\r\n            } catch (err) {\r\n                dispatch(error(\"Error signing up!\", 5))\r\n\r\n                setLoading(false)\r\n                setErrorMessage(err.response.data.error);\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <LoadingWrapper loading={loading} data={true}>\r\n            <SignUpForm errorMessage={errorMessage} onSignUp={signUp}/>\r\n        </LoadingWrapper>\r\n    )\r\n}\r\n\r\nexport default SignUpPresenter","import React  from \"react\";\r\nimport ErrorMessage from \"../util/errorMessage\";\r\nimport '../../styling/style_create_listing.css';\r\n\r\nfunction ListingCreationForm({createListing, error, uploadMessage, setUploadMessage}) {\r\n    const onSubmit = (e) => {\r\n        e.preventDefault()\r\n        createListing(e)\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\" id=\"create-listing\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                <h3>Listing details</h3>\r\n                    <div>\r\n                        <form id=\"createListingForm\" className=\"create-listing-form\" method=\"post\" encType=\"multipart/form-data\">\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"listing-title\"\r\n                                    name=\"title\"\r\n                                    placeholder=\"Title\"\r\n                                    className=\"form-control\"\r\n                                    required\r\n                                    />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"listing-price\"\r\n                                    name=\"price\"\r\n                                    placeholder=\"Price\"\r\n                                    className=\"form-control\"\r\n                                    required\r\n                                    />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"listing-location\"\r\n                                    name=\"location\"\r\n                                    placeholder=\"Location\"\r\n                                    className=\"form-control\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"image\"\r\n                                    name=\"image\"\r\n                                    type=\"file\"\r\n                                    className=\"form-control\"\r\n                                    onChange={e => {setUploadMessage(e.target.files[0].name)}}\r\n                                    required\r\n                                    hidden\r\n                                />\r\n                                <label className=\"btn btn-primary form-control\" htmlFor=\"image\">Upload image</label>\r\n                                <span id=\"file-chosen\">{uploadMessage}</span>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <textarea className=\"text_area\" rows=\"6\" cols=\"33\"\r\n                                    id=\"listing-description\"\r\n                                    name=\"description\"\r\n                                    placeholder=\"Description\"\r\n                                    />\r\n                            </div>\r\n                            <div>\r\n                                <button className=\"btn btn-primary form-control\" id=\"create-lising-button\" onClick={(e) => onSubmit(e)}>\r\n                                    Create listing!\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"error-messages\">\r\n                        <ErrorMessage message={error}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ListingCreationForm\r\n","import {\r\n    isNumber,\r\n    isLetters\r\n} from './validation';\r\n\r\n\r\nfunction createListingValidation({\r\n                            title,\r\n                            price,\r\n                            location,\r\n                            image,\r\n                            desc\r\n                        }){\r\n\r\n    let errorMessage = null;\r\n\r\n    if(!title){\r\n        errorMessage = \"Title must be specified\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if (!price){\r\n        errorMessage = \"Price must be specified\";\r\n        return [true, errorMessage];\r\n    } else if (!isNumber(price)){\r\n        errorMessage = \"Price can only contain numbers\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if (!location){\r\n        errorMessage = \"Location must be specified\";\r\n        return [true, errorMessage];\r\n    } else if (!isLocationValid(location)){\r\n        errorMessage = \"Location can only contain letters\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if(!image){\r\n        errorMessage = \"Please upload image\";\r\n        return [true, errorMessage];\r\n    } else if (!isImagevalid(image.name)){\r\n        errorMessage = \"Image must of file type gif, jpg, jpeg, tiff or png.\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    if(!desc){\r\n        errorMessage = \"Description must be specified\";\r\n        return [true, errorMessage];\r\n    }\r\n\r\n    return [false, errorMessage];\r\n}\r\n\r\nconst isImagevalid = (imageName) => {\r\n    const re = /[\\/.](gif|jpg|jpeg|tiff|png)$/;\r\n    return re.test(imageName);\r\n};\r\n\r\nconst isLocationValid = (imageName) => {\r\n    const re = /^[a-zA-Z ]+$/;\r\n    return re.test(imageName);\r\n};\r\n\r\nexport default createListingValidation","import React, {useState} from \"react\"\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport listingService from '../services/listings'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\n\r\nimport ListingCreationForm from \"../components/listing/createListing\";\r\nimport {error, info} from \"../reducers/notification\";\r\nimport createListingValidation from \"../utils/validation/createlisting\";\r\nimport LoadingWrapper from \"../components/util/loadingWrapper\";\r\n\r\nfunction CreateListingPresenter() {\r\n    const [loading, setLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const [uploadMessage, setUploadMessage] = useState('No image uploaded')\r\n    const session = useSelector(state => state.session)\r\n    const dispatch = useDispatch()\r\n    const nav = useNavigate();\r\n\r\n    const createListing = async (e) => {\r\n        const listing = {\r\n            title: e.target.form[0].value,\r\n            price: e.target.form[1].value,\r\n            location: e.target.form[2].value,\r\n            image: e.target.form[3].files[0],\r\n            desc: e.target.form[4].value\r\n        }\r\n\r\n        let [validationError, msg] = createListingValidation(listing)\r\n\r\n        if (validationError) {\r\n            setErrorMessage(msg)\r\n            return;\r\n        } else {\r\n            setErrorMessage('')\r\n        }\r\n\r\n        let formdata = new FormData();\r\n        formdata.append('title', listing.title);\r\n        formdata.append('desc', listing.desc);\r\n        formdata.append('price', listing.price);\r\n        formdata.append('image', listing.image);\r\n        formdata.append('imageUrl', listing.image.name);\r\n        formdata.append('location', listing.location);\r\n\r\n\r\n        if (!loading) {\r\n            try {\r\n                setLoading(true)\r\n\r\n                const res = await listingService.create(formdata, session.token)\r\n\r\n                setLoading(false)\r\n                dispatch(info(\"Listing successfully posted!\", 5))\r\n                nav('/listing/' + res.id);\r\n            } catch (err) {\r\n                dispatch(error(\"Error creating listing\", 5))\r\n                setLoading(false)\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <LoadingWrapper loading={loading} data={true}>\r\n            <div>\r\n                {(session ? <ListingCreationForm createListing={createListing} error={errorMessage} uploadMessage={uploadMessage} setUploadMessage={setUploadMessage} /> : <p>Log in to create listing</p>)}\r\n            </div>\r\n        </LoadingWrapper>\r\n    )\r\n}\r\n\r\nexport default CreateListingPresenter","import React from 'react'\r\nimport ListingView from \"../listing/listingView\";\r\nimport SingleUser from \"./singleUser\";\r\n\r\nconst UserProfile = ({user, onCancel, onListingClick, onDeleteListing}) => {\r\n    if (!user) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"user-profile\">\r\n            <button className=\"btn btn-danger\" id=\"user-cancel-button\" onClick={onCancel}>\r\n                Cancel\r\n            </button>\r\n            <div className=\"user-profile-inner\">\r\n                <div className=\"user-listing-wrapper\">\r\n                    <h3>{user.username + '\\'s items for sale'}</h3>\r\n                    <ListingView listings={user.listings} onClick={onListingClick} onDeleteListing={onDeleteListing}/>\r\n                </div>\r\n                <div className=\"user-info-wrapper\">\r\n                    <SingleUser user={user}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserProfile","import React, {useEffect, useState} from \"react\"\r\nimport LoadingWrapper from \"../components/util/loadingWrapper\";\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport userService from '../services/users'\r\nimport listingService from '../services/listings'\r\nimport UserProfile from \"../components/users/userProfile\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {error, info} from \"../reducers/notification\";\r\n\r\nfunction UserPresenter() {\r\n    const session = useSelector(state => state.session)\r\n    const [loading, setLoading] = useState(false)\r\n    const [user, setUser] = useState({})\r\n    const nav = useNavigate();\r\n    const {id} = useParams()\r\n    const dispatch = useDispatch()\r\n\r\n    const onDeleteListing = async (e, listing) => {\r\n        e.stopPropagation()\r\n\r\n        if (!loading) {\r\n            if (window.confirm('Are you sure you wish to delete this item?')) {\r\n                try {\r\n                    setLoading(true)\r\n\r\n                    await listingService.remove(listing.id, session.token)\r\n\r\n                    const res = await userService.getById(id)\r\n\r\n                    setUser(res)\r\n                    setLoading(false)\r\n                    dispatch(info(\"Successfully deleted listing\", 5))\r\n                } catch (err) {\r\n                    setLoading(false)\r\n                    dispatch(error(\"Error deleting listing\", 5))\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const onCancel = () => {\r\n        nav('/');\r\n    }\r\n\r\n    const onListingClick = (listing) => {\r\n        nav('/listing/' + listing.id);\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getUser = async (id) => {\r\n            if (!loading) {\r\n                setLoading(true)\r\n                try {\r\n                    const res = await userService.getById(id)\r\n\r\n                    setUser(res)\r\n\r\n                    setLoading(false)\r\n                } catch (err) {\r\n                    nav('/404')\r\n                    setLoading(false)\r\n                }\r\n            }\r\n        }\r\n\r\n        getUser(id)\r\n    }, [id])\r\n\r\n    return (\r\n        <div className={\"debug\"}>\r\n            <LoadingWrapper loading={loading} data={user}>\r\n                <UserProfile user={user} onCancel={onCancel} onListingClick={onListingClick} onDeleteListing={(session) ? (session.user.id === id) ? onDeleteListing : null : null}/>\r\n            </LoadingWrapper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserPresenter","import React from \"react\"\r\n\r\nfunction ProfileButton({onProfile}) {\r\n    return (\r\n        <button className=\"btn btn-primary\" id=\"profile-button\" onClick={onProfile}>\r\n            Profile\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default ProfileButton","import React from \"react\"\r\n\r\nfunction CreateListingButton({onCreateListing}) {\r\n    return (\r\n        <button className=\"btn btn-primary\" id=\"create-listing-button\" onClick={() => onCreateListing()}>\r\n            Create Listing\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default CreateListingButton","import React from \"react\"\r\n\r\nfunction LogOutButton({onLogout}) {\r\n    return (\r\n        <button className=\"btn btn-danger\" id=\"log-out-button\" onClick={onLogout}>\r\n            Log Out\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default LogOutButton","import React from \"react\"\r\n\r\nfunction LogInButton({onLogin}) {\r\n    return (\r\n        <button className=\"btn btn-primary\" id=\"login-nav-button\" onClick={onLogin}>Login</button>\r\n    )\r\n}\r\n\r\nexport default LogInButton","import React from 'react'\r\nimport ProfileButton from \"../session/profileButton\";\r\nimport CreateListingButton from \"../listing/createListingButton\";\r\nimport LogOutButton from \"../session/logOutButton\";\r\nimport LogInButton from \"../session/logInButton\";\r\n\r\nconst TopBar = ({children, session, onProfile, onCreateListing, onLogout, onLogin, onLogo}) => {\r\n    return (\r\n        <div className=\"header\">\r\n                <div className=\"header-item header-logo-item\">\r\n                    <div className=\"header-logo\" onClick={onLogo}>\r\n                        <p>BuyNSell</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"header-item header-form\">\r\n                    {children}\r\n                </div>\r\n                <div className=\"header-item\">\r\n                    {(session) ?\r\n                        <div className=\"header-buttons\">\r\n                            <ProfileButton onProfile={onProfile}/>\r\n                            <CreateListingButton onCreateListing={onCreateListing}/>\r\n                            <LogOutButton onLogout={onLogout}/>\r\n                        </div>\r\n                        :  <div className=\"header-buttons\"> \r\n                                <LogInButton onLogin={onLogin}/>\r\n                            </div>\r\n                    }\r\n                </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TopBar","import React from \"react\";\r\n\r\nfunction SearchForm({type, onSearch, onType}) {\r\n    const placeholders = [\" Search for products, by name or description...\", \" Search for products, by location...\"]\r\n\r\n    const handleInput = (event) => {\r\n        onSearch(event.target.value)\r\n    }\r\n\r\n    return (\r\n        <div className=\"search-field input-group rounded\">\r\n            <input\r\n                className=\"form-control rounded\"\r\n                onChange={handleInput}\r\n                placeholder={placeholders[type]}\r\n            />\r\n            <select className=\"search-type-select\"  onChange={e => onType(e.target.value)}>\r\n                <option value={0}>Products</option>\r\n                <option value={1}>Location</option>\r\n            </select>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchForm","import React, {useState} from \"react\"\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {performSearch} from \"../reducers/search\";\r\n\r\nimport SearchForm from \"../components/search/searchForm\";\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nfunction SearchFormPresenter() {\r\n    const [searchType, setSearchType] = useState(0)\r\n    const [callBlocker, setBlocker] = useState(false)\r\n    const {loading} = useSelector(state => state.search)\r\n    const dispatch = useDispatch()\r\n    const nav = useNavigate()\r\n\r\n    const onSearch = (query) => {\r\n        nav('/')\r\n        if (!loading) {\r\n            if (searchType == 0) {\r\n                if (query !== '') {\r\n                    dispatch(performSearch(searchType, query))\r\n                } else {\r\n                    dispatch(performSearch(searchType))\r\n                }\r\n            } else if (searchType == 1) {\r\n                if (!callBlocker && query.length > 3) {\r\n                    setBlocker(true)\r\n                    dispatch(performSearch(searchType, query))\r\n\r\n                    setTimeout(() => setBlocker(false), 1000);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const onType = (type) => {\r\n        setSearchType(type)\r\n    }\r\n\r\n    return (\r\n        <SearchForm\r\n            onSearch={onSearch}\r\n            onType={onType}\r\n            type={searchType}\r\n        />\r\n    )\r\n}\r\n\r\nexport default SearchFormPresenter","import React from \"react\"\r\nimport TopBar from \"../components/header/topBar\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {endSession} from \"../reducers/session\";\r\nimport SearchFormPresenter from \"./searchFormPresenter\";\r\n\r\nfunction TopBarPresenter() {\r\n    const session = useSelector(state => state.session)\r\n    const nav = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n    const onLogo = async () => {\r\n        nav('/')\r\n    }\r\n\r\n    const onLogin = () => {\r\n        nav('/login')\r\n    }\r\n\r\n    const onLogout = async () => {\r\n        dispatch(endSession())\r\n        nav('/')\r\n    }\r\n\r\n    const onProfile = () => {\r\n        nav('/user/' + session.user.id)\r\n    }\r\n\r\n    const onCreateListing = () => {\r\n        nav('/create-listing')\r\n    }\r\n\r\n    return (\r\n        <TopBar\r\n            session={session}\r\n            onLogout={onLogout}\r\n            onProfile={onProfile}\r\n            onCreateListing={onCreateListing}\r\n            onLogin={onLogin}\r\n            onLogo={onLogo}\r\n        >\r\n            <SearchFormPresenter/>\r\n        </TopBar>\r\n    )\r\n}\r\n\r\nexport default TopBarPresenter","function ErrorPage({cancel}) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1 id=\"errorPages-header\"> 404 </h1>\r\n\t\t\t<div id=\"errorPages-padding\"> <p> The page you requested does not exist. </p> </div>\r\n\t\t\t<div id=\"errorPages-padding\">\r\n\t\t\t\t<button className=\"btn btn-danger\" onClick={cancel}>Return Home </button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t);\r\n}\r\n\r\nexport default ErrorPage;","import React from 'react'\r\n\r\nconst CloseButton = ({onClick}) => {\r\n    return (\r\n        <button className=\"close-notification-button\"\r\n            onClick={() => onClick()}\r\n        >\r\n            X\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default CloseButton","import React from 'react'\r\nimport CloseButton from \"./closeButton\"\r\n\r\nconst Notification = ({notification, onClose}) => {\r\n    if (!notification) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"notification-wrapper\">\r\n            <div className={notification.type}>\r\n                    <CloseButton onClick={onClose}/>\r\n                    <div className=\"notification-info\">\r\n                        {notification.message}\r\n                    </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React from \"react\"\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {clear} from \"../reducers/notification\";\r\n\r\nimport Notification from \"../components/notification/notification\";\r\n\r\nfunction NotificationPresenter() {\r\n    const notification = useSelector(state => state.notification)\r\n    const dispatch = useDispatch()\r\n\r\n    const close = async () => {\r\n        dispatch(clear())\r\n    }\r\n\r\n    return (\r\n        <Notification onClose={close} notification={notification}/>\r\n    )\r\n}\r\n\r\nexport default NotificationPresenter","import React from \"react\"\r\nimport ErrorMessage from \"../util/errorMessage\";\r\nimport '../../styling/style_login.css';\r\n\r\nfunction LogInForm({onLogin, onSignUp, error}) {\r\n    const logIn = (e) => {\r\n        e.preventDefault()\r\n        onLogin(e)\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\" id=\"login\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                <h3>User credentials</h3>\r\n                    <div className=\"logInForm\">\r\n                        <form className=\"lform\" id=\"logInForm\">\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"username-input\"\r\n                                    className=\"form-control\"\r\n                                    type=\"text\"\r\n                                    name=\"username\"\r\n                                    placeholder=\"Username\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    id=\"password-input\"\r\n                                    className=\"form-control\"\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    placeholder=\"Password\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <button className=\"btn btn-primary form-control\"  id=\"login-button\" type=\"submit\" onClick={(e) => {logIn(e);}}>\r\n                                    Log In\r\n                                </button>\r\n                                <button className=\"btn btn-primary form-control\" id=\"signup-button\" type=\"submit\" onClick={onSignUp}>\r\n                                    Sign up\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"error-messages\">\r\n                        <ErrorMessage message={error}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default LogInForm","\r\nfunction loginValidation({username, password}){\r\n    let errorMessage = null;\r\n\r\n    if(!username){\r\n        errorMessage = \"Username must be specified\";\r\n        return [true, errorMessage];  \r\n    } \r\n    if (!password){\r\n        errorMessage = \"Password must be specified\";\r\n        return [true, errorMessage];  \r\n    }\r\n\r\n    return [false, errorMessage];\r\n}\r\n\r\nexport default loginValidation","import React, {useState} from \"react\"\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport LogInForm from \"../components/session/logInForm\";\r\nimport loginValidation from \"../utils/validation/login\";\r\nimport {logInUser} from \"../reducers/session\";\r\n\r\nfunction LogInPresenter() {\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n\r\n    const nav = useNavigate();\r\n    const dispatch = useDispatch()\r\n\r\n    const logIn = async (e) => {\r\n        const username = e.target.form[0].value\r\n        const password = e.target.form[1].value\r\n\r\n        let [validationError, msg] = loginValidation({username, password});\r\n\r\n        if(validationError){\r\n            setErrorMessage(msg);\r\n            return;\r\n        } else {\r\n            setErrorMessage('');\r\n        }\r\n\r\n        try {\r\n            await dispatch(logInUser(username, password))\r\n            nav('/');\r\n        } catch (err) {\r\n            setErrorMessage('Username or password incorrect');\r\n        }\r\n    }\r\n\r\n    const onSignUp = () => {\r\n        nav('/signup')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <LogInForm onLogin={logIn} onSignUp={onSignUp} error={errorMessage}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LogInPresenter","import React, {useEffect} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {Routes, Route, Navigate, useNavigate} from 'react-router-dom'\r\n\r\nimport {initSession} from \"./reducers/session\"\r\nimport {performSearch} from \"./reducers/search\";\r\n\r\nimport SearchResultPresenter from \"./presenters/searchResultPresenter\";\r\nimport ListingPresenter from \"./presenters/listingPresenter\";\r\nimport SignUpPresenter from \"./presenters/signupPresenter\";\r\nimport CreateListingPresenter from \"./presenters/createListingPresenter\";\r\nimport UserPresenter from \"./presenters/userPresenter\";\r\nimport TopBarPresenter from \"./presenters/topBarPresenter\";\r\nimport ErrorPage from \"./components/util/errorPage\"\r\nimport NotificationPresenter from \"./presenters/notificationPresenter\";\r\nimport LogInPresenter from \"./presenters/logInPresenter\";\r\n\r\nfunction App() {\r\n    const dispatch = useDispatch()\r\n    const session = useSelector(state => state.session)\r\n    const nav = useNavigate()\r\n\r\n    useEffect(() => {\r\n        // Continues previous session if it exists\r\n        dispatch(initSession())\r\n        // Starts of searching for all listings\r\n        dispatch(performSearch(0))\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <>\r\n            <NotificationPresenter/>\r\n            <div className=\"app\">\r\n                <TopBarPresenter session={session}/>\r\n                <div className=\"main\">\r\n                    <Routes>\r\n                        <Route exact path=\"/\"\r\n                            element={\r\n                                <SearchResultPresenter/>\r\n                            }\r\n                        />\r\n                        <Route exact path=\"/login\"\r\n                            element={\r\n                                (session) ? <Navigate to=\"/\"/> : <LogInPresenter/>\r\n                            }\r\n\r\n                        />\r\n                        <Route exact path=\"/search\"\r\n                               element={\r\n                                   <SearchResultPresenter/>\r\n                               }\r\n                        />\r\n                        <Route exact path=\"/create-listing\"\r\n                               element={\r\n                                   (session) ? <CreateListingPresenter/> : <Navigate to=\"/\"/>\r\n                               }\r\n                        />\r\n                        <Route exact path=\"/listing/:id\"\r\n                               element={\r\n                                   <ListingPresenter/>\r\n                               }\r\n                        />\r\n                        <Route exact path=\"/signup\"\r\n                               element={\r\n                                   (session) ? <Navigate to=\"/\"/> : <SignUpPresenter/>\r\n                               }\r\n                        />\r\n                        <Route exact path=\"/user/:id\"\r\n                               element={\r\n                                   <UserPresenter/>\r\n                               }\r\n                        />\r\n                        <Route path='*'\r\n                               element={\r\n                                   <ErrorPage cancel={() => nav('/')}/>\r\n                               }\r\n                        />\r\n                    </Routes>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default App\r\n","import {createStore, combineReducers, applyMiddleware} from 'redux'\r\nimport {composeWithDevTools} from 'redux-devtools-extension'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport sessionReducer from './reducers/session'\r\nimport searchReducer from \"./reducers/search\";\r\nimport notificationReducer from \"./reducers/notification\";\r\n\r\n/* Object containing all reducers */\r\nconst reducer = combineReducers({\r\n    session: sessionReducer,\r\n    search: searchReducer,\r\n    notification: notificationReducer\r\n})\r\n\r\nconst store = createStore(\r\n    reducer,\r\n    composeWithDevTools(\r\n        applyMiddleware(thunk)\r\n    )\r\n)\r\n\r\nexport default store\r\n\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Provider} from 'react-redux'\r\nimport {BrowserRouter as Router} from 'react-router-dom'\r\n\r\nimport './styling/style.css'\r\n\r\nimport App from './App'\r\n\r\nimport store from './store'\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Router>\r\n            <App />\r\n        </Router>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}